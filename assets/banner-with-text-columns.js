!function(){"use strict";customElements.get("banner-with-text-columns")||customElements.define("banner-with-text-columns",class extends HTMLElement{constructor(){super(),this.container=this,this.sliderContent=this.querySelector("[data-slider-content]"),this.singleImageEnabled=this.sliderContent?.hasAttribute("data-slider-single-image"),this.banners=this.querySelectorAll("[data-banner]"),this.links=this.querySelectorAll("a"),this.sliderMedia=this.querySelector("[data-slider-media]"),this.flktyContent=null,this.flktyMedia=null,this.onResizeCallback=()=>this.handleSlidersOnResize(),this.appearance=this.dataset.appearance}connectedCallback(){"columns"===this.appearance?this.handleColumnsLayout():this.handleRowLayout(),document.addEventListener("theme:resize:width",this.onResizeCallback)}disconnectedCallback(){document.removeEventListener("theme:resize:width",this.onResizeCallback)}listen(){this.links.forEach((e=>{e.addEventListener("focus",(()=>{const t=Number(e.closest("[data-banner]").getAttribute("data-index"));window.innerWidth>=theme.sizes.small&&this.sync(t)}))})),this.banners.forEach((e=>{e.addEventListener("mouseenter",(()=>{const t=Number(e.getAttribute("data-index"));window.innerWidth>=theme.sizes.small&&!window.theme.touch&&this.sync(t)})),e.addEventListener("pointerup",(()=>{const t=Number(e.getAttribute("data-index"));window.innerWidth>=theme.sizes.small&&window.theme.touch&&this.sync(t)}))}))}handleColumnsLayout(){if(this.sliderContent.children.length<=1)return;let e=window.innerWidth<window.theme.sizes.small;this.sliderMedia.children.length>1&&(this.flktyMedia=new window.theme.Flickity(this.sliderMedia,{draggable:!1,wrapAround:!1,fade:!0,prevNextButtons:!1,adaptiveHeight:!1,pageDots:!1,setGallerySize:!1,on:{ready:()=>{requestAnimationFrame((()=>{this.flktyMedia&&this.flktyMedia.resize()}))},change:e=>{this.handleGroupItemsNavigation(e,this.flktyContent)}}}),window.theme.flickitySmoothScrolling(this.sliderMedia)),this.flktyContent=new window.theme.Flickity(this.sliderContent,{draggable:e,prevNextButtons:!1,pageDots:!0,cellAlign:"left",adaptiveHeight:!1,imagesLoaded:!0,on:{ready:()=>{this.listen(),this.slidesTabIndex(),requestAnimationFrame((()=>{this.flktyContent&&this.flktyContent.resize()}))},change:e=>{window.innerWidth<theme.sizes.small&&!this.singleImageEnabled&&this.flktyMedia.select(e),this.slidesTabIndex(),this.handleGroupItemsNavigation(e,this.flktyMedia)}}}),window.theme.flickitySmoothScrolling(this.sliderContent)}handleRowLayout(){if(this.sliderMedia.children.length<=1||window.theme.isMobile())return this.updateState(0),void this.listen();this.initMediaSlider()}initMediaSlider(){this.flktyMedia=new window.theme.Flickity(this.sliderMedia,{draggable:!0,wrapAround:!1,fade:!0,prevNextButtons:!1,adaptiveHeight:!1,pageDots:!1,setGallerySize:!1,on:{ready:()=>{this.updateState(0),this.listen(),requestAnimationFrame((()=>{this.flktyMedia&&this.flktyMedia.resize()}))},change:e=>{this.updateState(e)}}}),window.theme.flickitySmoothScrolling(this.sliderMedia)}handleGroupItemsNavigation(e,t=null){null!==t&&requestAnimationFrame((()=>{e!==t.selectedIndex&&t.select(e)}))}slidesTabIndex(){if(!this.sliderContent)return;window.theme.Flickity.data(this.sliderContent).cells.forEach((e=>{let t="-1";e.element.classList.contains("is-selected")&&(t="0"),e.element.querySelectorAll("a, button").forEach((e=>{e.setAttribute("tabindex",t)}))}))}sync(e=0){"columns"===this.appearance?this.flktyContent.selectCell(e):this.updateState(e),this.flktyMedia&&this.flktyMedia.selectCell(e)}updateState(e=0){this.banners.forEach((t=>{const i=Number(t.getAttribute("data-index"));t.classList.toggle("is-selected",i===e)}))}handleSlidersOnResize(){if("row"===this.appearance){if(window.theme.isMobile()&&this.flktyMedia)return this.flktyMedia.destroy(),void(this.flktyMedia=null);if(window.theme.isDesktop()&&!this.flktyMedia)return void this.initMediaSlider()}this.flktyContent&&(this.flktyContent.resize(),this.toggleDraggable()),this.flktyMedia&&this.flktyMedia.resize()}toggleDraggable(){this.flktyContent.options.draggable=window.innerWidth<window.theme.sizes.small,this.flktyContent.updateDraggable()}})}();
