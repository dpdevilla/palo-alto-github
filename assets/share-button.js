!function(){"use strict";customElements.get("share-button")||customElements.define("share-button",class extends HTMLElement{constructor(){super(),this.container=this.closest("[data-section-type]"),this.shareButton=this.querySelector("[data-share-button]"),this.tooltip=this.querySelector("tooltip-component")}connectedCallback(){this.shareButton&&(this.urlToShare=this.shareButton.dataset.shareLink||document.location.href,navigator.share?this.shareButton.addEventListener("click",(()=>{navigator.share({url:this.urlToShare,title:document.title})})):this.shareButton.addEventListener("click",this.copyToClipboard.bind(this)),this.updateShareLink())}copyToClipboard(){navigator.clipboard.writeText(this.urlToShare).then((()=>{"function"==typeof this.tooltip?.addPinEvent&&this.tooltip.addPinEvent(),setTimeout((()=>{document.dispatchEvent(new CustomEvent("theme:tooltip:close",{bubbles:!1,detail:{hideTransition:!0}}))}),1500)}))}updateShareLink(){"product-template"===this.container?.getAttribute("data-section-type")&&this.container.addEventListener("theme:variant:change",(t=>{if(t.detail?.variant?.id){const e=this.urlToShare.split("?")[0];this.urlToShare=`${e}?variant=${t.detail.variant.id}`}}))}})}();
