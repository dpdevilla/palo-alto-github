!function(){"use strict";customElements.get("scroll-spy")||customElements.define("scroll-spy",class extends HTMLElement{constructor(){super(),this.containerId=this.dataset.scrollSpyContainer,this.targetId=this.dataset.scrollSpyTarget,this.containerId&&this.targetId?this.scrollCallback=()=>this.onScroll():console.error("ScrollSpy component requires data-scroll-spy-container and data-scroll-spy-target attributes.",this)}connectedCallback(){this.container=document.getElementById(this.containerId),this.targetElement=document.getElementById(this.targetId),this.container&&this.targetElement?(this.anchorSelector=`[data-scroll-spy="#${this.targetId}"]`,this.anchor=this.container.querySelector(this.anchorSelector),this.anchors=this.container.querySelectorAll("[data-scroll-spy]"),this.anchor?this.init():console.warn(`ScrollSpy anchor not found for target #${this.targetId} within container #${this.containerId}. Selector: ${this.anchorSelector}`,this.container)):console.error("ScrollSpy container or target element not found.",{containerId:this.containerId,targetId:this.targetId,component:this})}init(){this.onScroll(),document.addEventListener("theme:scroll",this.scrollCallback),document.addEventListener("theme:resize:width",this.scrollCallback)}disconnectedCallback(){document.removeEventListener("theme:scroll",this.scrollCallback),document.removeEventListener("theme:resize:width",this.scrollCallback)}isEligible(){return!(!this.anchor||this.container.hasAttribute("data-scroll-spy-prevent"))&&(window.theme.isMobile()&&this.anchor.hasAttribute("data-scroll-spy-mobile")||window.theme.isDesktop()&&this.anchor.hasAttribute("data-scroll-spy-desktop")||!this.anchor.hasAttribute("data-scroll-spy-desktop")&&!this.anchor.hasAttribute("data-scroll-spy-mobile"))}onScroll(){if(!this.targetElement||!this.anchor||!this.container)return;if(!this.isEligible())return;const t=this.targetElement.getBoundingClientRect();this.top=t.top,this.bottom=t.bottom;const e=Math.round(window.innerHeight),s=Math.round(window.scrollY),o=s+e,i=Math.round(this.top+s),n=this.targetElement.offsetHeight;if(!(i<o&&!(i+n<s)))return;const r=this.anchor.parentNode;r&&r.offsetHeight<=n?(this.container.style.setProperty("--sticky-position",window.innerHeight/2-n/2+"px"),this.container.classList.remove("is-full-height")):r&&(this.container.classList.add("is-full-height"),this.container.style.removeProperty("--sticky-position"));const c=this.anchor.getBoundingClientRect();this.anchorTop=c.top,this.anchorBottom=c.bottom;const a=this.top<this.anchorTop,h=this.bottom<this.anchorBottom;a&&!h?(this.anchors.forEach((t=>{t!==this.anchor&&t.classList.remove("is-selected")})),this.anchor.classList.add("is-selected")):this.anchor.classList.remove("is-selected")}})}();
